<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../styles/signUp_styles.css">
</head>

<body>
    <div class="header">
        <div class="container">
            <div class="hamburger-menu">
                <input id="menu__toggle" type="checkbox" />
                <label class="menu__btn" for="menu__toggle">
                  <span></span>
                </label>
                <ul class="menu__box">
                    <li><a class="menu__item" href="../../pages/eng/MainPage.eng.html">Main</a></li>
                    <li><a class="menu__item" href="../../pages/eng/page2.eng.html">Theory and tests</a></li>
                    <li><a class="menu__item" href="#">Virtual machine</a></li>
                </ul>
            </div>
            <div class="lang">
                <a href="../../pages/ukr/signUp_page.html" class="link">UA</a>
                <a href="#" class="link active">ENG</a>
            </div>
        </div>
    </div>


    <div class="main">
        <div class="row"> <form action="/action_page.php">
            <div class="container">
              <h1>SIGN UP</h1>
              <p>Please, fill out these forms to create an account.</p>
              <hr>
          
              <label for="email"><b>Email</b></label>
              <input type="text" placeholder="Enter email" name="email" id="email" required>
          
              <label for="psw"><b>Password</b></label>
              <input type="password" placeholder="Enter password" name="psw" id="psw" required>
          
              <label for="psw-repeat"><b>Repeat password</b></label>
              <input type="password" placeholder="Enter password again" name="psw-repeat" id="psw-repeat" required>
              <hr>
              <button type="submit" class="registerbtn">Sign Up</button>
            </div>
            
            <div class="container signin">
              <p>Already have an account? <a href="../../pages/eng/signIn_page.eng.html">Sign In</a>.</p>
            </div>
          </form>
        </div>
    </div>

    <div class="footer">
        <div class="text">Our contacs:</div>
        <div class="text">Email: nazarcherneha05@gmail.com</div>
        <div class="text">Phone number: 098-643-17</div>
    </div>
</body>

<script type="module">
 
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDxOpwVawjWr8F8I2xl4Wm_Hpe0YN9rX9c",
    authDomain: "authentication-app-41a36.firebaseapp.com",
    databaseURL: "https://authentication-app-41a36-default-rtdb.firebaseio.com",
    projectId: "authentication-app-41a36",
    storageBucket: "authentication-app-41a36.appspot.com",
    messagingSenderId: "608523376965",
    appId: "1:608523376965:web:afc20b2c57c31c79cd462c"
  };


  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  const auth = getAuth();

  document.addEventListener('DOMContentLoaded', () => {
    const signUpButton = document.querySelector('.registerbtn');

    signUpButton.addEventListener('click', (e) => {
        e.preventDefault();

        var email = document.getElementById('email').value;
        var password = document.getElementById('psw').value;
        var repeatPassword = document.getElementById('psw-repeat').value;

        if (password !== repeatPassword) {
            alert('Passwords do not match');
            return;
        }

        createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                
                const user = userCredential.user;

                set(ref(database, 'users/' + user.uid), {
                    email: email
                })

                alert('User created!');

                window.location.href = "../../pages/eng/MainPage.eng.html";
               
            })
            .catch((error) => {
                const errorMessage = error.message;
                alert(errorMessage);
                
            });
    });
});

  
</script>
</html>